<html>
<head>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <script src='https://cdn.plot.ly/plotly-2.4.1.min.js'></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.17/d3.min.js'></script>
    <script src='./bomber.js'></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We" crossorigin="anonymous">
    <style>
        html, body {
            height: 100%;
        }

        .vertical-center {
            min-height: 100%; /* Fallback for browsers do NOT support vh unit */
            min-height: 100vh; /* These two lines are counted as one :-)       */

            display: flex;
            align-items: center;
        }
    </style>
</head>

<body>
<div class="w-100">
    <div class="row vertical-center">
        <div class="col-11" id="chartPanel">
            <div id='mainCandles'></div>
        </div>
        <div class="col-1">
            <button id="btn_addnewtop">Add Top</button>
            <button class="btn_add_serie">Add Serie</button>
            <button id="btn_addnewbottom">Add Bottom</button>
            <select id="serieList" multiple="multiple"></select>

        </div>
    </div>
</div>

</body>
<script>
    var dataset_golobal;
    const margin = {r: 10, t: 25, b: 40, l: 60};
    const layout = {
        showlegend: true,
        hovermode: 'x',
        xaxis: {
            rangeslider: {visible: false},
            "showspikes": true,
            "spikemode": "across",
            "spikedash": "solid",
            "spikecolor": "#000000",
            "spikethickness": 2
        },
        yaxis: {autorange: true},
        dragmode: 'zoom',
        margin,
        height: 150,
    };
    const options = {displayModeBar: true}

    const DATASET_URL = "/gotrader/plotly/datatest.json";

    $(document).ready(() => {

        $('#btn_addnewtop').click(e => {
            console.log("top", e);
            console.log("selected", $('#serieList').val()[0]);
        })

        addCharts().then(() => {
            console.log("ready")
        })
    })


</script>
</html>
